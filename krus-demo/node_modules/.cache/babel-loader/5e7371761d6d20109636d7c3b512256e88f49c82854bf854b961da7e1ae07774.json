{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\admin\\\\Desktop\\\\merged\\\\krus-demo\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useRef } from \"react\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport './App.css';\nimport logo from './assets/logo2.png';\nimport sendIcon from './assets/send.png';\n// import chatBubble2 from './assets/chat-bubble.png';\nimport chatBubble2 from './assets/new-message-5.png';\n\n// === Backend API helpers ===\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst API_BASE = (process.env.REACT_APP_API_BASE || \"http://localhost:8000\").replace(/\\/$/, \"\");\nasync function apiAsk(question, reset_memory = false) {\n  const r = await fetch(`${API_BASE}/ask`, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\"\n    },\n    body: JSON.stringify({\n      question,\n      reset_memory\n    })\n  });\n  if (!r.ok) throw new Error(\"ask failed\");\n  return await r.json(); // { answer, citations }\n}\nasync function apiFollowUp() {\n  const r = await fetch(`${API_BASE}/followup`, {\n    method: \"POST\"\n  });\n  if (!r.ok) throw new Error(\"followup failed\");\n  return await r.json();\n}\nasync function apiReset() {\n  const r = await fetch(`${API_BASE}/reset`, {\n    method: \"POST\"\n  });\n  if (!r.ok) throw new Error(\"reset failed\");\n  return await r.json();\n}\n// === end API helpers ===\n\nexport default function DomainChatPoC() {\n  _s();\n  const [conversations, setConversations] = useState(() => {\n    try {\n      const raw = localStorage.getItem(\"poc_domain_chat_history\");\n      return raw ? JSON.parse(raw) : [{\n        id: genId(),\n        name: \"Główna rozmowa\",\n        messages: []\n      }];\n    } catch (e) {\n      return [{\n        id: genId(),\n        name: \"Główna rozmowa\",\n        messages: []\n      }];\n    }\n  });\n  const [activeConvIdx, setActiveConvIdx] = useState(0);\n  const [input, setInput] = useState(\"\");\n  const [isTyping, setIsTyping] = useState(false);\n  const [canFollowUp, setCanFollowUp] = useState(false);\n  const [followUpArmed, setFollowUpArmed] = useState(false);\n  const [questionCount, setQuestionCount] = useState(0);\n  const endRef = useRef(null);\n  const textareaRef = useRef(null);\n  const MAX_LINES = 6;\n  useEffect(() => {\n    localStorage.setItem(\"poc_domain_chat_history\", JSON.stringify(conversations));\n  }, [conversations]);\n  useEffect(() => scrollToBottom(), [conversations, activeConvIdx]);\n  useEffect(() => {\n    const ta = textareaRef.current;\n    if (!ta) return;\n\n    // ustawienia box-sizing i reset wysokości\n    ta.style.boxSizing = \"border-box\";\n    ta.style.height = \"auto\";\n    const computed = window.getComputedStyle(ta);\n\n    // pobierz lineHeight (jeśli 'normal' -> fallback do 1.2 * fontSize)\n    let lineHeight = parseFloat(computed.lineHeight);\n    if (Number.isNaN(lineHeight)) {\n      const fontSize = parseFloat(computed.fontSize) || 16;\n      lineHeight = fontSize * 1.2;\n    }\n\n    // paddingy i obramowania (żeby dokładnie policzyć wysokość)\n    const paddingTop = parseFloat(computed.paddingTop) || 0;\n    const paddingBottom = parseFloat(computed.paddingBottom) || 0;\n    const borderTop = parseFloat(computed.borderTopWidth) || 0;\n    const borderBottom = parseFloat(computed.borderBottomWidth) || 0;\n    const maxHeightPx = Math.round(lineHeight * MAX_LINES + paddingTop + paddingBottom + borderTop + borderBottom);\n\n    // desired = minimalna z naturalnej zawartości i maxHeight\n    const desired = Math.min(ta.scrollHeight, maxHeightPx);\n    ta.style.height = desired + \"px\";\n\n    // jeśli zawartość przekracza max -> włącz scroll w textarea, inaczej ukryj\n    ta.style.overflowY = ta.scrollHeight > maxHeightPx ? \"auto\" : \"hidden\";\n  }, [input]);\n  function genId() {\n    return Math.random().toString(36).slice(2, 9);\n  }\n  const handleSendEnter = e => {\n    if (e.nativeEvent && e.nativeEvent.isComposing) return;\n    if (e.key === \"Enter\" && !e.shiftKey) {\n      handleSend(e);\n    }\n  };\n  function addMessage(role, text) {\n    setConversations(prev => {\n      const copy = [...prev];\n      copy[activeConvIdx] = {\n        ...copy[activeConvIdx]\n      };\n      copy[activeConvIdx].messages = [...copy[activeConvIdx].messages, {\n        id: genId(),\n        role,\n        text,\n        ts: Date.now()\n      }];\n      return copy;\n    });\n  }\n  function handleSend(e) {\n    e === null || e === void 0 ? void 0 : e.preventDefault();\n    const question = input.trim();\n    if (!question) return;\n    addMessage(\"user\", question);\n    setInput(\"\");\n    simulateAssistantAnswer(question);\n  }\n  const domainKnowledge = {\n    \"co to jest bateria\": \"Bateria magazynów energii to urządzenie do przechowywania energii elektrycznej. Najczęściej stosuje się baterie litowo-jonowe lub inne nowoczesne technologie.\",\n    \"jak dobrać moc\": \"Dobór mocy zależy od profilu zużycia energii – należy przeanalizować maksymalne zapotrzebowanie (kW) oraz wymaganą pojemność (kWh).\",\n    \"bezpieczenstwo\": \"Bezpieczeństwo obejmuje systemy BMS, chłodzenie, zabezpieczenia pożarowe i ochronę przed głębokim rozładowaniem.\"\n  };\n  function getDomainAnswer(question) {\n    const q = question.toLowerCase();\n    for (const k of Object.keys(domainKnowledge)) {\n      if (q.includes(k)) return domainKnowledge[k];\n    }\n    if (q.includes(\"ile\") && q.includes(\"kwh\")) return \"Aby policzyć zapotrzebowanie, oblicz średnie dzienne zużycie i pomnóż przez liczbę dni autonomii.\";\n    return \"Nie mam gotowej odpowiedzi – proszę doprecyzować pytanie (np. parametry, oczekiwana pojemność).\";\n  }\n  async function simulateAssistantAnswer(question) {\n    try {\n      setIsTyping(true);\n      const res = await apiAsk(question, false);\n      const answer = res && res.answer ? res.answer : \"Brak odpowiedzi.\";\n      typeAssistantText(answer);\n      setQuestionCount(n => n + 1);\n      setCanFollowUp(true);\n      setFollowUpArmed(false);\n    } catch (e) {\n      console.error(e);\n      typeAssistantText(\"Błąd połączenia z backendem.\");\n    }\n  }\n  function typeAssistantText(fullText) {\n    let i = 0;\n    addMessage(\"assistant\", \"\");\n    const interval = setInterval(() => {\n      i += Math.ceil(Math.random() * 3);\n      const slice = fullText.slice(0, i);\n      setConversations(prev => {\n        const copy = [...prev];\n        const msgs = [...copy[activeConvIdx].messages];\n        const lastIdx = msgs.length - 1;\n        if (msgs[lastIdx].role === \"assistant\") {\n          msgs[lastIdx] = {\n            ...msgs[lastIdx],\n            text: slice\n          };\n        }\n        copy[activeConvIdx] = {\n          ...copy[activeConvIdx],\n          messages: msgs\n        };\n        return copy;\n      });\n      if (i >= fullText.length) {\n        clearInterval(interval);\n        setIsTyping(false);\n      }\n    }, 35);\n  }\n  async function armFollowUp() {\n    try {\n      await apiFollowUp();\n      setFollowUpArmed(true);\n    } catch (e) {\n      console.error(e);\n    }\n  }\n  function newConversation() {\n    setConversations(prev => [...prev, {\n      id: genId(),\n      name: \"Rozmowa \" + (prev.length + 1),\n      messages: []\n    }]);\n    setActiveConvIdx(conversations.length);\n    apiReset().catch(e => console.warn(\"apiReset failed\", e));\n  }\n  function clearActiveConversation() {\n    setConversations(prev => {\n      const copy = [...prev];\n      copy[activeConvIdx] = {\n        ...copy[activeConvIdx],\n        messages: []\n      };\n      return copy;\n    });\n    apiReset().catch(e => console.warn(\"apiReset failed\", e));\n  }\n  function scrollToBottom() {\n    var _endRef$current;\n    (_endRef$current = endRef.current) === null || _endRef$current === void 0 ? void 0 : _endRef$current.scrollIntoView({\n      behavior: \"smooth\",\n      block: \"end\"\n    });\n  }\n  const activeConv = conversations[activeConvIdx] || {\n    messages: []\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"relative h-screen font-sans\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"absolute inset-0 bg-cover bg-center absolute-background\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"absolute inset-0\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"relative grid grid-cols-12 h-full\",\n      children: [/*#__PURE__*/_jsxDEV(\"aside\", {\n        className: \"col-span-3 border-slate-200 p-4 shadow-lg flex flex-col bg-white/80 overflow-y-auto\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center justify-between mb-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-lg font-semibold text-slate-800\",\n            children: [/*#__PURE__*/_jsxDEV(\"img\", {\n              width: 28,\n              height: 28,\n              src: logo,\n              alt: \"logo\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 234,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              children: \" KRUS AI\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 235,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 233,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"new-message text-sm px-3 py-1 bg-brand hover:bg-brand-dark transition text-white rounded-lg shadow\",\n            onClick: newConversation,\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: chatBubble2,\n              width: 22,\n              height: 22\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 241,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 237,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-2 overflow-auto flex-1 pr-1 chat-lists\",\n          children: conversations.map((c, idx) => /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setActiveConvIdx(idx),\n            className: `w-full text-left p-3 rounded-lg flex items-center justify-between transition ${idx === activeConvIdx ? \"bg-brand-light border-l-4 border-brand-dark\" : \"hover:bg-slate-50\"}`,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"font-medium text-sm text-slate-800\",\n                children: c.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 257,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"text-xs text-slate-500\",\n                children: [c.messages.length, \" wiadomo\\u015Bci\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 258,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 256,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"text-xs text-slate-400\",\n              children: c.messages.length ? formatAgo(c.messages[c.messages.length - 1].ts) : \"—\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 260,\n              columnNumber: 33\n            }, this)]\n          }, c.id, true, {\n            fileName: _jsxFileName,\n            lineNumber: 247,\n            columnNumber: 29\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-6 text-xs text-slate-500\",\n          children: \"Asystent udziela informacji w zakresie ustawy o ubezpieczeniu spo\\u0142ecznym rolnik\\xF3w. Odpowiedzi nie stanowi\\u0105 porady prawnej.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 267,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 231,\n        columnNumber: 17\n      }, this), activeConv.messages.length > 0 ? /*#__PURE__*/_jsxDEV(\"main\", {\n        className: \"flex-1 overflow-y-auto col-span-9 flex flex-col\",\n        children: [/*#__PURE__*/_jsxDEV(\"header\", {\n          className: \"px-6 py-4 border-slate-200   flex items-center justify-between bg-white/40\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            children: /*#__PURE__*/_jsxDEV(\"h3\", {\n              className: \"text-lg font-semibold text-slate-800\",\n              children: activeConv.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 277,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 276,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 275,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n          className: \"flex-1 p-6 overflow-y-auto  from-white to-slate-50 chat-messages bg-white/40\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"max-w-3xl mx-auto space-y-4\",\n            children: [/*#__PURE__*/_jsxDEV(AnimatePresence, {\n              initial: false,\n              children: activeConv.messages.map(msg => /*#__PURE__*/_jsxDEV(motion.div, {\n                initial: {\n                  opacity: 0,\n                  y: 6\n                },\n                animate: {\n                  opacity: 1,\n                  y: 0\n                },\n                exit: {\n                  opacity: 0,\n                  y: -6\n                },\n                children: /*#__PURE__*/_jsxDEV(MessageBubble, {\n                  msg: msg\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 291,\n                  columnNumber: 45\n                }, this)\n              }, msg.id, false, {\n                fileName: _jsxFileName,\n                lineNumber: 285,\n                columnNumber: 41\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 283,\n              columnNumber: 33\n            }, this), isTyping && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-start animate-pulse\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-9 h-9 rounded-full bg-green-100 flex items-center justify-center text-xs text-brand-dark font-bold\",\n                children: \"A\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 298,\n                columnNumber: 41\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"ml-3 px-4 py-2 bg-slate-100 rounded-xl text-sm shadow-sm italic text-gray-500\",\n                children: \"Pisze...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 301,\n                columnNumber: 41\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 297,\n              columnNumber: 37\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              ref: endRef\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 304,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 282,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 281,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"px-6 pb-2\",\n          children: [canFollowUp && questionCount >= 1 && !followUpArmed && /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: armFollowUp,\n            className: \"text-sm px-3 py-1 rounded-full border\",\n            title: \"Nast\\u0119pne pytanie potraktuj\\u0119 jako dopytanie (do\\u0142o\\u017C\\u0119 TOP-1 ust\\u0119p).\",\n            children: \"Chcia\\u0142bym dopyta\\u0107\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 311,\n            columnNumber: 29\n          }, this), followUpArmed && /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-xs ml-2\",\n            children: \"Tryb dopytania w\\u0142\\u0105czony \\u2014 nast\\u0119pne pytanie b\\u0119dzie follow-upem.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 320,\n            columnNumber: 29\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 309,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleSend,\n          className: \"px-6 py-4  border-slate-200  shadow-inner shrink-0 bg-white/40\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"max-w-3xl mx-auto flex gap-3 \",\n            children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n              ref: textareaRef,\n              value: input,\n              rows: 1,\n              onKeyDown: handleSendEnter,\n              onChange: e => setInput(e.target.value),\n              className: \"input-text border-green resize-none  flex-1 p-3 rounded-xl border border-slate-200 focus:outline-none focus:ring-1 focus:ring-brand shadow-sm\",\n              placeholder: \"Zadaj pytanie...\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 331,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              className: \"px-5 py-2 rounded-xl bg-brand hover:bg-brand-dark transition text-white font-medium shadow-md disabled:opacity-50\",\n              disabled: !input.trim(),\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                height: 20,\n                width: 20,\n                src: sendIcon,\n                alt: \"send\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 345,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 340,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 330,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 326,\n          columnNumber: 25\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 274,\n        columnNumber: 21\n      }, this) : /*#__PURE__*/_jsxDEV(\"main\", {\n        className: \"flex-1 overflow-y-auto col-span-9 flex flex-col\",\n        children: /*#__PURE__*/_jsxDEV(motion.section, {\n          className: \"flex-1 flex flex-col items-center welcome-stext justify-center text-center px-6 bg-white/40\",\n          initial: {\n            opacity: 0\n          },\n          animate: {\n            opacity: 1\n          },\n          exit: {\n            opacity: 0\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n            className: \"main-text text-2xl font-bold  mb-4\",\n            children: \"\\uD83D\\uDC4B Witaj! Tu Asystent Kasy Rolniczego Ubezpieczenia Spo\\u0142ecznego\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 359,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"main-text text-semibold mb-8 max-w-screen-lg\",\n            children: [\"Udzielam informacji w zakresie ustawy o ubezpieczeniu spo\\u0142ecznym rolnik\\xF3w, w tym kogo obejmuje ubezpieczenie i jakie \\u015Bwiadczenia przys\\u0142uguj\\u0105. Mog\\u0119 tak\\u017Ce odpowiada\\u0107 na pytania dotycz\\u0105ce danych statystycznych, takich jak kwoty i liczba \\u015Bwiadcze\\u0144 w latach 2024\\u20132025.\", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 363,\n              columnNumber: 296\n            }, this), \"Udzielane informacje maj\\u0105 charakter og\\xF3lny i nie stanowi\\u0105 porady prawnej ani indywidualnej interpretacji przepis\\xF3w.                            \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 362,\n            columnNumber: 29\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-full max-w-2xl\",\n            children: /*#__PURE__*/_jsxDEV(\"form\", {\n              onSubmit: handleSend,\n              className: \"flex gap-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n                ref: textareaRef,\n                value: input,\n                rows: 1,\n                onKeyDown: handleSendEnter,\n                onChange: e => setInput(e.target.value),\n                className: \"input-text resize-none flex-1 p-3 rounded-xl border border-slate-200 focus:outline-none focus:ring-1 focus:ring-brand shadow-sm\",\n                placeholder: \"Zadaj pytanie...\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 367,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"submit\",\n                className: \"px-5 py-2 rounded-xl bg-brand hover:bg-brand-dark transition text-white font-medium shadow-md disabled:opacity-50\",\n                disabled: !input.trim(),\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  height: 20,\n                  width: 20,\n                  src: sendIcon,\n                  alt: \"send\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 381,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 376,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 366,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 365,\n            columnNumber: 29\n          }, this)]\n        }, \"welcome\", true, {\n          fileName: _jsxFileName,\n          lineNumber: 352,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 351,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 220,\n    columnNumber: 9\n  }, this);\n}\n_s(DomainChatPoC, \"JavN8DFSwBxMBQy9+yv73a3Sha4=\");\n_c = DomainChatPoC;\nfunction MessageBubble({\n  msg\n}) {\n  var _msg$text;\n  if (msg.role === \"user\") {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-start justify-end\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"max-w-[70%]\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-xs text-slate-400 text-right mb-1\",\n          children: \"Ty\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 399,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"bg-brand text-white px-4 py-2 rounded-xl text-sm shadow-md break-words whitespace-pre-wrap\",\n          children: msg.text\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 400,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 398,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 397,\n      columnNumber: 7\n    }, this);\n  }\n  const safeText = ((_msg$text = msg.text) !== null && _msg$text !== void 0 ? _msg$text : \"\").replace(/\\\\n/g, \"\\n\"); // na wypadek podwójnego escapowania\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex items-start\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"w-9 h-9 rounded-full bg-brand-light flex items-center justify-center text-xs ai-text font-bold\",\n      children: \"A\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 410,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"ml-3 max-w-[70%]\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-xs text-slate-400 mb-1\",\n        children: \"Asystent\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 412,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bg-white px-4 py-2 rounded-xl border border-slate-200 text-sm shadow-sm break-words whitespace-pre-wrap\",\n        children: safeText\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 413,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 411,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 409,\n    columnNumber: 5\n  }, this);\n}\n_c2 = MessageBubble;\nfunction formatAgo(ts) {\n  if (!ts) return \"—\";\n  const diff = Math.floor((Date.now() - ts) / 1000);\n  if (diff < 60) return `${diff}s`;\n  if (diff < 3600) return `${Math.floor(diff / 60)}m`;\n  if (diff < 86400) return `${Math.floor(diff / 3600)}h`;\n  return `${Math.floor(diff / 86400)}d`;\n}\nvar _c, _c2;\n$RefreshReg$(_c, \"DomainChatPoC\");\n$RefreshReg$(_c2, \"MessageBubble\");","map":{"version":3,"names":["React","useEffect","useState","useRef","motion","AnimatePresence","logo","sendIcon","chatBubble2","jsxDEV","_jsxDEV","API_BASE","process","env","REACT_APP_API_BASE","replace","apiAsk","question","reset_memory","r","fetch","method","headers","body","JSON","stringify","ok","Error","json","apiFollowUp","apiReset","DomainChatPoC","_s","conversations","setConversations","raw","localStorage","getItem","parse","id","genId","name","messages","e","activeConvIdx","setActiveConvIdx","input","setInput","isTyping","setIsTyping","canFollowUp","setCanFollowUp","followUpArmed","setFollowUpArmed","questionCount","setQuestionCount","endRef","textareaRef","MAX_LINES","setItem","scrollToBottom","ta","current","style","boxSizing","height","computed","window","getComputedStyle","lineHeight","parseFloat","Number","isNaN","fontSize","paddingTop","paddingBottom","borderTop","borderTopWidth","borderBottom","borderBottomWidth","maxHeightPx","Math","round","desired","min","scrollHeight","overflowY","random","toString","slice","handleSendEnter","nativeEvent","isComposing","key","shiftKey","handleSend","addMessage","role","text","prev","copy","ts","Date","now","preventDefault","trim","simulateAssistantAnswer","domainKnowledge","getDomainAnswer","q","toLowerCase","k","Object","keys","includes","res","answer","typeAssistantText","n","console","error","fullText","i","interval","setInterval","ceil","msgs","lastIdx","length","clearInterval","armFollowUp","newConversation","catch","warn","clearActiveConversation","_endRef$current","scrollIntoView","behavior","block","activeConv","className","children","fileName","_jsxFileName","lineNumber","columnNumber","width","src","alt","onClick","map","c","idx","formatAgo","initial","msg","div","opacity","y","animate","exit","MessageBubble","ref","title","onSubmit","value","rows","onKeyDown","onChange","target","placeholder","type","disabled","section","_c","_msg$text","safeText","_c2","diff","floor","$RefreshReg$"],"sources":["C:/Users/admin/Desktop/merged/krus-demo/src/App.js"],"sourcesContent":["import React, { useEffect, useState, useRef } from \"react\";\nimport { motion, AnimatePresence } from \"framer-motion\";\nimport './App.css';\nimport logo from './assets/logo2.png';\nimport sendIcon from './assets/send.png';\n// import chatBubble2 from './assets/chat-bubble.png';\nimport chatBubble2 from './assets/new-message-5.png';\n\n\n// === Backend API helpers ===\nconst API_BASE = (process.env.REACT_APP_API_BASE || \"http://localhost:8000\").replace(/\\/$/, \"\");\n\nasync function apiAsk(question, reset_memory = false) {\n  const r = await fetch(`${API_BASE}/ask`, {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify({ question, reset_memory })\n  });\n  if (!r.ok) throw new Error(\"ask failed\");\n  return await r.json(); // { answer, citations }\n}\n\nasync function apiFollowUp() {\n  const r = await fetch(`${API_BASE}/followup`, { method: \"POST\" });\n  if (!r.ok) throw new Error(\"followup failed\");\n  return await r.json();\n}\n\nasync function apiReset() {\n  const r = await fetch(`${API_BASE}/reset`, { method: \"POST\" });\n  if (!r.ok) throw new Error(\"reset failed\");\n  return await r.json();\n}\n// === end API helpers ===\n\n\nexport default function DomainChatPoC() {\n    const [conversations, setConversations] = useState(() => {\n        try {\n            const raw = localStorage.getItem(\"poc_domain_chat_history\");\n            return raw ? JSON.parse(raw) : [{ id: genId(), name: \"Główna rozmowa\", messages: [] }];\n        } catch (e) {\n            return [{ id: genId(), name: \"Główna rozmowa\", messages: [] }];\n        }\n    });\n    const [activeConvIdx, setActiveConvIdx] = useState(0);\n    const [input, setInput] = useState(\"\");\n    const [isTyping, setIsTyping] = useState(false);\n    \n    const [canFollowUp, setCanFollowUp] = useState(false);\n    const [followUpArmed, setFollowUpArmed] = useState(false);\n    const [questionCount, setQuestionCount] = useState(0);\nconst endRef = useRef(null);\n    const textareaRef = useRef(null);\n    const MAX_LINES = 6;\n\n\n    useEffect(() => {\n        localStorage.setItem(\"poc_domain_chat_history\", JSON.stringify(conversations));\n    }, [conversations]);\n\n    useEffect(() => scrollToBottom(), [conversations, activeConvIdx]);\n\n    useEffect(() => {\n        const ta = textareaRef.current;\n        if (!ta) return;\n\n        // ustawienia box-sizing i reset wysokości\n        ta.style.boxSizing = \"border-box\";\n        ta.style.height = \"auto\";\n\n        const computed = window.getComputedStyle(ta);\n\n        // pobierz lineHeight (jeśli 'normal' -> fallback do 1.2 * fontSize)\n        let lineHeight = parseFloat(computed.lineHeight);\n        if (Number.isNaN(lineHeight)) {\n            const fontSize = parseFloat(computed.fontSize) || 16;\n            lineHeight = fontSize * 1.2;\n        }\n\n        // paddingy i obramowania (żeby dokładnie policzyć wysokość)\n        const paddingTop = parseFloat(computed.paddingTop) || 0;\n        const paddingBottom = parseFloat(computed.paddingBottom) || 0;\n        const borderTop = parseFloat(computed.borderTopWidth) || 0;\n        const borderBottom = parseFloat(computed.borderBottomWidth) || 0;\n\n        const maxHeightPx =\n            Math.round(lineHeight * MAX_LINES + paddingTop + paddingBottom + borderTop + borderBottom);\n\n        // desired = minimalna z naturalnej zawartości i maxHeight\n        const desired = Math.min(ta.scrollHeight, maxHeightPx);\n\n        ta.style.height = desired + \"px\";\n\n        // jeśli zawartość przekracza max -> włącz scroll w textarea, inaczej ukryj\n        ta.style.overflowY = ta.scrollHeight > maxHeightPx ? \"auto\" : \"hidden\";\n    }, [input]);\n\n    function genId() {\n        return Math.random().toString(36).slice(2, 9);\n    }\n\n    const handleSendEnter = (e) => {\n        if (e.nativeEvent && e.nativeEvent.isComposing) return;\n\n        if (e.key === \"Enter\" && !e.shiftKey) {\n            handleSend(e);\n        }\n    };\n\n    function addMessage(role, text) {\n        setConversations(prev => {\n            const copy = [...prev];\n            copy[activeConvIdx] = { ...copy[activeConvIdx] };\n            copy[activeConvIdx].messages = [\n                ...copy[activeConvIdx].messages,\n                { id: genId(), role, text, ts: Date.now() },\n            ];\n            return copy;\n        });\n    }\n\n    function handleSend(e) {\n        e?.preventDefault();\n        const question = input.trim();\n        if (!question) return;\n        addMessage(\"user\", question);\n        setInput(\"\");\n        simulateAssistantAnswer(question);\n    }\n\n    const domainKnowledge = {\n        \"co to jest bateria\":\n            \"Bateria magazynów energii to urządzenie do przechowywania energii elektrycznej. Najczęściej stosuje się baterie litowo-jonowe lub inne nowoczesne technologie.\",\n        \"jak dobrać moc\":\n            \"Dobór mocy zależy od profilu zużycia energii – należy przeanalizować maksymalne zapotrzebowanie (kW) oraz wymaganą pojemność (kWh).\",\n        \"bezpieczenstwo\":\n            \"Bezpieczeństwo obejmuje systemy BMS, chłodzenie, zabezpieczenia pożarowe i ochronę przed głębokim rozładowaniem.\",\n    };\n\n    function getDomainAnswer(question) {\n        const q = question.toLowerCase();\n        for (const k of Object.keys(domainKnowledge)) {\n            if (q.includes(k)) return domainKnowledge[k];\n        }\n        if (q.includes(\"ile\") && q.includes(\"kwh\"))\n            return \"Aby policzyć zapotrzebowanie, oblicz średnie dzienne zużycie i pomnóż przez liczbę dni autonomii.\";\n        return \"Nie mam gotowej odpowiedzi – proszę doprecyzować pytanie (np. parametry, oczekiwana pojemność).\";\n    }\n\n    \n    async function simulateAssistantAnswer(question) {\n        try {\n            setIsTyping(true);\n            const res = await apiAsk(question, false);\n            const answer = (res && res.answer) ? res.answer : \"Brak odpowiedzi.\";\n            typeAssistantText(answer);\n            setQuestionCount(n => n + 1);\n            setCanFollowUp(true);\n            setFollowUpArmed(false);\n        } catch (e) {\n            console.error(e);\n            typeAssistantText(\"Błąd połączenia z backendem.\");\n        }\n    }\n    function typeAssistantText(fullText) {\n        let i = 0;\n        addMessage(\"assistant\", \"\");\n        const interval = setInterval(() => {\n            i += Math.ceil(Math.random() * 3);\n            const slice = fullText.slice(0, i);\n            setConversations(prev => {\n                const copy = [...prev];\n                const msgs = [...copy[activeConvIdx].messages];\n                const lastIdx = msgs.length - 1;\n                if (msgs[lastIdx].role === \"assistant\") {\n                    msgs[lastIdx] = { ...msgs[lastIdx], text: slice };\n                }\n                copy[activeConvIdx] = { ...copy[activeConvIdx], messages: msgs };\n                return copy;\n            });\n            if (i >= fullText.length) {\n                clearInterval(interval);\n                setIsTyping(false);\n            }\n        }, 35);\n    }\n\n    async function armFollowUp() {\n        try {\n            await apiFollowUp();\n            setFollowUpArmed(true);\n        } catch (e) {\n            console.error(e);\n        }\n    }\n\n    function newConversation() {\n        setConversations(prev => [...prev, { id: genId(), name: \"Rozmowa \" + (prev.length + 1), messages: [] }]);\n        setActiveConvIdx(conversations.length);\n        apiReset().catch(e => console.warn(\"apiReset failed\", e));\n    }\n\n    function clearActiveConversation() {\n        setConversations(prev => {\n            const copy = [...prev];\n            copy[activeConvIdx] = { ...copy[activeConvIdx], messages: [] };\n            return copy;\n        });\n        apiReset().catch(e => console.warn(\"apiReset failed\", e));\n    }\n\n    function scrollToBottom() {\n        endRef.current?.scrollIntoView({ behavior: \"smooth\", block: \"end\" });\n    }\n\n    const activeConv = conversations[activeConvIdx] || { messages: [] };\n\n    return (\n        <div className=\"relative h-screen font-sans\">\n            {/* Tło z pola */}\n            <div\n                className=\"absolute inset-0 bg-cover bg-center absolute-background\"\n            />\n            {/* Nakładka półprzezroczysta */}\n            <div className=\"absolute inset-0\" />\n\n            {/* Właściwa zawartość czatu */}\n            <div className=\"relative grid grid-cols-12 h-full\">\n                {/* Sidebar */}\n                <aside className=\"col-span-3 border-slate-200 p-4 shadow-lg flex flex-col bg-white/80 overflow-y-auto\">\n                    <div className=\"flex items-center justify-between mb-6\">\n                        <h2 className=\"text-lg font-semibold text-slate-800\">\n                            <img width={28} height={28} src={logo} alt=\"logo\" />\n                            <span> KRUS AI</span>\n                        </h2>\n                        <button\n                            className=\"new-message text-sm px-3 py-1 bg-brand hover:bg-brand-dark transition text-white rounded-lg shadow\"\n                            onClick={newConversation}\n                        >\n                            <img src={chatBubble2} width={22} height={22} />\n                        </button>\n                    </div>\n\n                    <div className=\"space-y-2 overflow-auto flex-1 pr-1 chat-lists\">\n                        {conversations.map((c, idx) => (\n                            <button\n                                key={c.id}\n                                onClick={() => setActiveConvIdx(idx)}\n                                className={`w-full text-left p-3 rounded-lg flex items-center justify-between transition ${\n                                    idx === activeConvIdx\n                                        ? \"bg-brand-light border-l-4 border-brand-dark\"\n                                        : \"hover:bg-slate-50\"\n                                }`}\n                            >\n                                <div>\n                                    <div className=\"font-medium text-sm text-slate-800\">{c.name}</div>\n                                    <div className=\"text-xs text-slate-500\">{c.messages.length} wiadomości</div>\n                                </div>\n                                <div className=\"text-xs text-slate-400\">\n                                    {c.messages.length ? formatAgo(c.messages[c.messages.length - 1].ts) : \"—\"}\n                                </div>\n                            </button>\n                        ))}\n                    </div>\n\n                    <div className=\"mt-6 text-xs text-slate-500\">\n                        Asystent udziela informacji w zakresie ustawy o ubezpieczeniu społecznym rolników. Odpowiedzi nie stanowią porady prawnej.\n                    </div>\n                </aside>\n\n                {/* Main chat */}\n                {activeConv.messages.length > 0 ? (\n                    <main className=\"flex-1 overflow-y-auto col-span-9 flex flex-col\">\n                        <header className=\"px-6 py-4 border-slate-200   flex items-center justify-between bg-white/40\">\n                            <div>\n                                <h3 className=\"text-lg font-semibold text-slate-800\">{activeConv.name}</h3>\n                            </div>\n                        </header>\n\n                        <section className=\"flex-1 p-6 overflow-y-auto  from-white to-slate-50 chat-messages bg-white/40\">\n                            <div className=\"max-w-3xl mx-auto space-y-4\">\n                                <AnimatePresence initial={false}>\n                                    {activeConv.messages.map((msg) => (\n                                        <motion.div\n                                            key={msg.id}\n                                            initial={{ opacity: 0, y: 6 }}\n                                            animate={{ opacity: 1, y: 0 }}\n                                            exit={{ opacity: 0, y: -6 }}\n                                        >\n                                            <MessageBubble msg={msg} />\n                                        </motion.div>\n                                    ))}\n                                </AnimatePresence>\n\n                                {isTyping && (\n                                    <div className=\"flex items-start animate-pulse\">\n                                        <div className=\"w-9 h-9 rounded-full bg-green-100 flex items-center justify-center text-xs text-brand-dark font-bold\">\n                                            A\n                                        </div>\n                                        <div className=\"ml-3 px-4 py-2 bg-slate-100 rounded-xl text-sm shadow-sm italic text-gray-500\">Pisze...</div>\n                                    </div>\n                                )}\n                                <div ref={endRef} />\n                            </div>\n                        </section>\n\n                        {/* Pasek nad inputem: guzik \"Chciałbym dopytać\" */}\n                        <div className=\"px-6 pb-2\">\n                          {canFollowUp && questionCount >= 1 && !followUpArmed && (\n                            <button\n                              onClick={armFollowUp}\n                              className=\"text-sm px-3 py-1 rounded-full border\"\n                              title=\"Następne pytanie potraktuję jako dopytanie (dołożę TOP-1 ustęp).\"\n                            >\n                              Chciałbym dopytać\n                            </button>\n                          )}\n                          {followUpArmed && (\n                            <span className=\"text-xs ml-2\">\n                              Tryb dopytania włączony — następne pytanie będzie follow-upem.\n                            </span>\n                          )}\n                        </div>\n\n                        <form\n                            onSubmit={handleSend}\n                            className=\"px-6 py-4  border-slate-200  shadow-inner shrink-0 bg-white/40\"\n                        >\n                            <div className=\"max-w-3xl mx-auto flex gap-3 \">\n                            <textarea\n                                ref={textareaRef}\n                                value={input}\n                                rows={1}\n                                onKeyDown={handleSendEnter}\n                                onChange={(e) => setInput(e.target.value)}\n                                className=\"input-text border-green resize-none  flex-1 p-3 rounded-xl border border-slate-200 focus:outline-none focus:ring-1 focus:ring-brand shadow-sm\"\n                                placeholder=\"Zadaj pytanie...\"\n                            />\n                                <button\n                                    type=\"submit\"\n                                    className=\"px-5 py-2 rounded-xl bg-brand hover:bg-brand-dark transition text-white font-medium shadow-md disabled:opacity-50\"\n                                    disabled={!input.trim()}\n                                >\n                                    <img height={20} width={20} src={sendIcon} alt=\"send\" />\n                                </button>\n                            </div>\n                        </form>\n                    </main>\n                ) : (\n                    <main className=\"flex-1 overflow-y-auto col-span-9 flex flex-col\">\n                        <motion.section\n                            key=\"welcome\"\n                            className=\"flex-1 flex flex-col items-center welcome-stext justify-center text-center px-6 bg-white/40\"\n                            initial={{ opacity: 0 }}\n                            animate={{ opacity: 1 }}\n                            exit={{ opacity: 0 }}\n                        >\n                            <h1 className=\"main-text text-2xl font-bold  mb-4\">\n                                👋 Witaj! Tu Asystent Kasy Rolniczego Ubezpieczenia Społecznego\n                            </h1>\n                            <p className=\"main-text text-semibold mb-8 max-w-screen-lg\">\n                                Udzielam informacji w zakresie ustawy o ubezpieczeniu społecznym rolników, w tym kogo obejmuje ubezpieczenie i jakie świadczenia przysługują. Mogę także odpowiadać na pytania dotyczące danych statystycznych, takich jak kwoty i liczba świadczeń w latach 2024–2025.<br/>\n                                Udzielane informacje mają charakter ogólny i nie stanowią porady prawnej ani indywidualnej interpretacji przepisów.                            </p>\n                            <div className=\"w-full max-w-2xl\">\n                                <form onSubmit={handleSend} className=\"flex gap-3\">\n                                    <textarea\n                                        ref={textareaRef}\n                                        value={input}\n                                        rows={1}\n                                        onKeyDown={handleSendEnter}\n                                        onChange={(e) => setInput(e.target.value)}\n                                        className=\"input-text resize-none flex-1 p-3 rounded-xl border border-slate-200 focus:outline-none focus:ring-1 focus:ring-brand shadow-sm\"\n                                        placeholder=\"Zadaj pytanie...\"\n                                    />\n                                    <button\n                                        type=\"submit\"\n                                        className=\"px-5 py-2 rounded-xl bg-brand hover:bg-brand-dark transition text-white font-medium shadow-md disabled:opacity-50\"\n                                        disabled={!input.trim()}\n                                    >\n                                        <img height={20} width={20} src={sendIcon} alt=\"send\" />\n                                    </button>\n                                </form>\n                            </div>\n                        </motion.section>\n                    </main>\n                )}\n\n            </div>\n        </div>\n    );\n}\n\nfunction MessageBubble({ msg }) {\n  if (msg.role === \"user\") {\n    return (\n      <div className=\"flex items-start justify-end\">\n        <div className=\"max-w-[70%]\">\n          <div className=\"text-xs text-slate-400 text-right mb-1\">Ty</div>\n          <div className=\"bg-brand text-white px-4 py-2 rounded-xl text-sm shadow-md break-words whitespace-pre-wrap\">\n            {msg.text}\n          </div>\n        </div>\n      </div>\n    );\n  }\n  const safeText = (msg.text ?? \"\").replace(/\\\\n/g, \"\\n\"); // na wypadek podwójnego escapowania\n  return (\n    <div className=\"flex items-start\">\n      <div className=\"w-9 h-9 rounded-full bg-brand-light flex items-center justify-center text-xs ai-text font-bold\">A</div>\n      <div className=\"ml-3 max-w-[70%]\">\n        <div className=\"text-xs text-slate-400 mb-1\">Asystent</div>\n        <div className=\"bg-white px-4 py-2 rounded-xl border border-slate-200 text-sm shadow-sm break-words whitespace-pre-wrap\">\n          {safeText}\n        </div>\n      </div>\n    </div>\n  );\n}\n\n\nfunction formatAgo(ts) {\n    if (!ts) return \"—\";\n    const diff = Math.floor((Date.now() - ts) / 1000);\n    if (diff < 60) return `${diff}s`;\n    if (diff < 3600) return `${Math.floor(diff / 60)}m`;\n    if (diff < 86400) return `${Math.floor(diff / 3600)}h`;\n    return `${Math.floor(diff / 86400)}d`;\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}